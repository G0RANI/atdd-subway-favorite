# 🚀 3단계 - 패키지 리팩터링

# 요구사항

- 작성한 인수 테스트를 기반으로 리팩터링을 진행하세요.

## 프로그래밍 요구사항

- 인증 관련 부분을 다른 프로젝트에서 재사용 할 수 있는 수준으로 리팩터링 하세요.
  - email/password 로그인 로직과 github 로그인 로직에서 추상화 할 수 있는 부분은 추상화하고, 중복 제거를 할 수 있는 부분은 제거하세요.
  - 리팩터링 간 패키지 사이의 상호 참조가 발생할 수 있는데 이 부분을 최대한 발생하지 않도록 하세요.

# 힌트

## TDD를 활용한 리팩터링 방법

### 1. 기존 코드는 그대로 두고 새로운 테스트를 만들기

- 기존 코드나 기존 테스트를 먼저 제거한다면 엄청난 재앙이 시작됨...ㄷㄷ

### 2. 새로운 테스트를 만족하는 프로덕션 코드 만들기

- 이때 불가피하게 코드 중복이 발생함

### 3. 기존 코드를 모두 대체했다면 그 때 기존 테스트와 함께 지우기

- 이렇게 하면 리팩터링 하는 도중에 코드작업을 멈추거나 다른 개발을 하더라도 롤백해하는 일이 없음
- 단, 코드 중복이 되어있는 상태를 짧게 가져가도록 해야함

## auth 패키지와 member 패키지에 대한 의존 제거

- 현재 auth 패키지와 member 패키지는 서로 의존하고 있는 경우
- UserDetailsService를 추상화 하여 auth -> member 의존을 제거하기

> [우아한 객체지향 세미나 - 패키지 의존 문제 해결](https://youtu.be/dJ5C4qRqAgA?t=2941)
